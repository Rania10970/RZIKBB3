<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">



<html xmlns="http://www.w3.org/1999/xhtml" xmlns:widget="http://www.netvibes.com/ns/">


<head>

    <!-- Application Metas -->
    <title>Title of the App</title>
    <meta name="author" content="John Doe" />
    <meta name="description" content="A descriptive description" />

    <!-- Application Standalone emulation files -->
    <link rel="stylesheet" type="text/css" href="http://uwa.netvibes.com/lib/c/UWA/assets/css/standalone.css" />
    <script type="text/javascript" src="http://uwa.netvibes.com/lib/c/UWA/js/UWA_Standalone_Alone.js"></script>

    <!-- Application JavaScript Source -->
    <script type="text/javascript">
        (function () {
            'use strict';
            require(
                [
                    'DS/PlatformAPI/PlatformAPI',
                ],
                function (PlatformAPI) {

                    var platformId;
                    var theConnectedUser;
                    var theSecurityContext;
                    var myViewer;
                    var theApplicativeURI;
                    var theProto;
                    var modeWidget;
                    var engeneringServer;

                    var user = PlatformAPI.getUser();
                    if (user && user.login) {
                        theConnectedUser = user.login;
                    }

                    var myWidget = {
                        onLoad: function () {
                            var i = 0;
                            // Here we update the content of the widget body.
                            widget.setBody('Hello World!');
                            widget.createElement('a', {
                                text: 'My link',
                                events: {
                                    click: function () { console.log(user) }
                                }
                            }).inject(widget.body);

                            var table = widget.createElement('table', {
                                border: "1",
                                id:''
                            }).inject(widget.body)
                            var tr1 = widget.createElement('tr').inject(table)
                            var tr2 = widget.createElement('tr').inject(table)

                            var th1 = widget.createElement('th', {
                                html: 'Désignation'
                            }).inject(tr1)

                            var th2 = widget.createElement('th', {
                                html: 'Quantité'
                            }).inject(tr1)

                            var th3 = widget.createElement('th', {
                                html: 'Série'
                            }).inject(tr1)

                            var td1 = widget.createElement('td', {
                                name="Designation"
                            }).inject(tr2)
                            var td2 = widget.createElement('td', {
                                name="Designation"
                            }).inject(tr2)
                            var td3 = widget.createElement('td', {
                                name="Designation"
                            }).inject(tr2)
                            var td4 = widget.createElement('td').inject(tr2)
                            
                            
                            
                            // function removeKid(element) {
                            //     document.getElementById('kids').removeChild(element.parentNode);
                            //     i--;
                            // }

                            var input1 = widget.createElement('input').inject(td1);
                            var input2 = widget.createElement('input').inject(td2);
                            var input3 = widget.createElement('input').inject(td3);



                            var addBtn = new UWA.Controls.Input.Button({
                                value: "+",
                                events: {
                                    onClick: function addKid() {
                                        if (i < 5) {
                                            var newRow = document.createElement('tr');

                                            newRow.innerHTML = '<td> <input type="text" name="Designation_' + i + '" ><td> <input type="text" name="Serie_' + i + '" ></td><td><input type="text" name="Quantite_' + i + '" ></td><td><input type="button" id="add_kid()" onClick="addKid()" value="+" /><input type="button" value="-" onclick="removeKid(this.parentNode)"></td>';

                                            document.getElementById('kids').appendChild(newRow);
                                            i++;
                                        }
                                    },
                                    id: "add_kid()"
                                }
                            }).inject(td4);







                        },

                        onRefresh: function () {
                            ExpandController.onRefresh(widget);
                        },
                        onResize: function () {
                            ExpandController.onResize(widget);
                        }
                    };
                    console.log("9GAG");

                    console.log(widget.id)
                    widget.addEvent('onLoad', myWidget.onLoad);
                    widget.addEvent('onRefresh', myWidget.onRefresh);
                    widget.addEvent('onResize', myWidget.onResize);
                });

        }());
    </script>
</head>

<body>
    <p>Loading...</p>
</body>

</html>